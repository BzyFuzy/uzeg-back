{"version":3,"sources":["views/journalist/workspace/index.js","containers/Card.js"],"names":["API_URL","window","location","origin","toString","WorkSpace","useState","content","setContent","style","padding","fontSize","color","marginBottom","TextEditor","onSubmit","data","body","marginTop","className","dangerouslySetInnerHTML","__html","setBody","e","preventDefault","console","log","display","flexDirection","type","placeholder","editor","ClassicEditor","config","extraPlugins","plugins","get","createUploadAdapter","loader","upload","Promise","resolve","reject","FormData","file","then","append","fetch","method","res","json","default","filename","catch","err","uploadAdapter","onReady","onChange","event","getData","onBlur","onFocus","cursor","alignSelf","background","border","borderRadius","Row","props","children","Card"],"mappings":"uNAKMA,EAAUC,OAAOC,SAASC,OAAOC,WAExB,SAASC,IAAa,IAAD,EACJC,mBAAS,IADL,mBAC3BC,EAD2B,KAClBC,EADkB,KAElC,OACE,gCACE,eAAC,IAAD,CACEC,MAAO,CACLC,QAAS,eAFb,UAKE,mBACED,MAAO,CACLE,SAAU,OACVC,MAAO,UACPC,aAAc,IAJlB,2EASA,cAACC,EAAD,CAAYC,SAAU,SAACC,GAAD,OAAUR,EAAWQ,EAAKC,YAGlD,cAAC,IAAD,CAAMR,MAAO,CAAES,UAAW,GAAIR,QAAS,eAAvC,SACE,qBACES,UAAU,aACVC,wBAAyB,CAAEC,OAAQd,UAO7C,IAAMO,EAAa,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SAAe,EACXT,mBAAS,IADE,mBAC5BW,EAD4B,KACtBK,EADsB,KA2CnC,OACE,uBACEP,SA1CiB,SAACQ,GACpBA,EAAEC,iBACFC,QAAQC,IAAIT,GACZF,EAAS,CAAEE,UAwCTR,MAAO,CAAEkB,QAAS,OAAQC,cAAe,UAF3C,UAIE,uBACEnB,MAAO,CAAEI,aAAc,OAAQH,QAAS,YACxCmB,KAAK,OACLC,YAAY,yCAEd,cAAC,WAAD,CACEC,OAAQC,IACRC,OAAQ,CACNC,aAAc,CAnBtB,SAAsBH,GACpBA,EAAOI,QAAQC,IAAI,kBAAkBC,oBAAsB,SAACC,GAC1D,OA9BJ,SAAuBA,GACrB,MAAO,CACLC,OAAQ,WACN,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC3B,IAAMzB,EAAO,IAAI0B,SACjBL,EAAOM,KAAKC,MAAK,SAACD,GAChB3B,EAAK6B,OAAO,OAAQF,GAGpBG,MAAM,GAAD,OAAI/C,EAAJ,YAlDO,qBAkD2B,CACrCgD,OAAQ,OACR/B,KAAMA,IAGL4B,MAAK,SAACI,GAAD,OAASA,EAAIC,UAClBL,MAAK,SAACI,GACLR,EAAQ,CACNU,QAAQ,oCAAD,OAAsCF,EAAIG,eAGpDC,OAAM,SAACC,GACNZ,EAAOY,cASVC,CAAcjB,OAmBnBkB,QAAS,SAACzB,GAERN,QAAQC,IAAI,0BAA2BK,IAEzC0B,SAAU,SAACC,EAAO3B,GAChB,IAAMf,EAAOe,EAAO4B,UACpBlC,QAAQC,IAAI,CAAEgC,QAAO3B,SAAQf,SAC7BM,EAAQN,IAEV4C,OAAQ,SAACF,EAAO3B,GACdN,QAAQC,IAAI,QAASK,IAEvB8B,QAAS,SAACH,EAAO3B,GACfN,QAAQC,IAAI,SAAUK,MAG1B,wBACEtB,MAAO,CACLqD,OAAQ,UACRC,UAAW,WACX7C,UAAW,GACX8C,WAAY,UACZpD,MAAO,OACPqD,OAAQ,OACRvD,QAAS,WACTwD,aAAc,GAEhBrC,KAAK,SAXP,6D,oFCxGOsC,EAAM,SAACC,GAClB,OAAO,+CAASA,GAAT,aAAiBA,EAAMC,aAGjBC,IAZF,SAACF,GACZ,OACE,6CAAKjD,UAAU,QAAWiD,GAA1B,aACGA,EAAMC","file":"static/js/7.9a2f8106.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\nimport Card from \"../../../containers/Card\";\r\nimport { CKEditor } from \"@ckeditor/ckeditor5-react\";\r\nimport ClassicEditor from \"@ckeditor/ckeditor5-build-classic\";\r\n\r\nconst API_URL = window.location.origin.toString();\r\nconst UPLOAD_ENDPOINT = \"api/photos/upload\";\r\nexport default function WorkSpace() {\r\n  const [content, setContent] = useState(\"\");\r\n  return (\r\n    <div>\r\n      <Card\r\n        style={{\r\n          padding: \"32.5px 42px\",\r\n        }}\r\n      >\r\n        <p\r\n          style={{\r\n            fontSize: \"18px\",\r\n            color: \"#212543\",\r\n            marginBottom: 20,\r\n          }}\r\n        >\r\n          Мэдээ нэмэх\r\n        </p>\r\n        <TextEditor onSubmit={(data) => setContent(data.body)} />\r\n      </Card>\r\n\r\n      <Card style={{ marginTop: 10, padding: \"32.5px 42px\" }}>\r\n        <div\r\n          className=\"ck-content\"\r\n          dangerouslySetInnerHTML={{ __html: content }}\r\n        ></div>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst TextEditor = ({ onSubmit }) => {\r\n  const [body, setBody] = useState(\"\");\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    console.log(body);\r\n    onSubmit({ body });\r\n  };\r\n\r\n  function uploadAdapter(loader) {\r\n    return {\r\n      upload: () => {\r\n        return new Promise((resolve, reject) => {\r\n          const body = new FormData();\r\n          loader.file.then((file) => {\r\n            body.append(\"file\", file);\r\n            // let headers = new Headers();\r\n            // headers.append(\"Origin\", \"http://localhost:3000\");\r\n            fetch(`${API_URL}/${UPLOAD_ENDPOINT}`, {\r\n              method: \"post\",\r\n              body: body,\r\n              // mode: \"no-cors\"\r\n            })\r\n              .then((res) => res.json())\r\n              .then((res) => {\r\n                resolve({\r\n                  default: `http://localhost:3001/news/image/${res.filename}`,\r\n                });\r\n              })\r\n              .catch((err) => {\r\n                reject(err);\r\n              });\r\n          });\r\n        });\r\n      },\r\n    };\r\n  }\r\n  function uploadPlugin(editor) {\r\n    editor.plugins.get(\"FileRepository\").createUploadAdapter = (loader) => {\r\n      return uploadAdapter(loader);\r\n    };\r\n  }\r\n\r\n  return (\r\n    <form\r\n      onSubmit={handleSubmit}\r\n      style={{ display: \"flex\", flexDirection: \"column\" }}\r\n    >\r\n      <input\r\n        style={{ marginBottom: \"10px\", padding: \"10px 5px\" }}\r\n        type=\"text\"\r\n        placeholder=\"Гарчиг\"\r\n      />\r\n      <CKEditor\r\n        editor={ClassicEditor}\r\n        config={{\r\n          extraPlugins: [uploadPlugin],\r\n        }}\r\n        onReady={(editor) => {\r\n          // You can store the \"editor\" and use when it is needed.\r\n          console.log(\"Editor is ready to use!\", editor);\r\n        }}\r\n        onChange={(event, editor) => {\r\n          const data = editor.getData();\r\n          console.log({ event, editor, data });\r\n          setBody(data);\r\n        }}\r\n        onBlur={(event, editor) => {\r\n          console.log(\"Blur.\", editor);\r\n        }}\r\n        onFocus={(event, editor) => {\r\n          console.log(\"Focus.\", editor);\r\n        }}\r\n      />\r\n      <button\r\n        style={{\r\n          cursor: \"pointer\",\r\n          alignSelf: \"flex-end\",\r\n          marginTop: 20,\r\n          background: \"#d4938b\",\r\n          color: \"#FFF\",\r\n          border: \"none\",\r\n          padding: \"5px 20px\",\r\n          borderRadius: 5,\r\n        }}\r\n        type=\"submit\"\r\n      >\r\n        Нийтлэх\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n","const Card = (props) => {\r\n  return (\r\n    <div className=\"card\" {...props}>\r\n      {props.children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const Row = (props) => {\r\n  return <div {...props}>{props.children}</div>;\r\n};\r\n\r\nexport default Card;\r\n"],"sourceRoot":""}